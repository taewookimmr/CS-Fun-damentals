## TCP/IP

---
### 1. TCP/IP의 레이어 구성 
* TCP : Transmission Control Protocol
* IP : Internet Protocol
* TCP/IP는 4층의 모델을 기반
    ```
    애플리케이션 층
    트랜스포트 층
    인터넷 층
    네트워크 인터페이스 층
    ```
---
### 2. 각 층의 동작과 대응하는 주요 프로토콜

* 네트워크 인터페이스 층
    * 직접 연결된 상대와의 통신 기능 구현 
    * 물리적인 장치로 구현된다. 

* 인터넷 층
    * 네트워크 인터페이스 층을 기반으로 중계 등의 기능을 추가
    * 핵심 : 직접 연결되어 있지 않는 대상 사이의 통신을 가능케하는 기능 구현
    * IP가 이에 해당

* 트랜스포트 층
    * 인터넷 층에서 구현한 통신 기능 사용, 목적에 맞게 통신 제어
    * TCP, UDP 
    * TCP : 신뢰도 높은 통신 구현하는 프로토콜
    * UDP : 통신을 가볍게 처리, 실시간 성격이 크다.

* 애플리케이션 층
    * HTTP, SMTP, POP3, IMAP4
    * 구체적인 통신 서비스를 구현한다.(Web, Email)

아하 Web 서버 접속처럼 누락되면 곤란한 경우 : 신뢰도 높은 TCP 사용
동영상 전송이나, 인터넷 전화와 같이 속도 중요시 : 실시간성이 높은 UDP 사용 good

---
### 3. 인터넷 층의 역할

* 역할

    * 직접 연결되어 있지 않은 컴퓨터끼리도 서로 통신 가능케 해줌
    * 패킷 중계 기능이 그것을 가능케 한다.
    * 패킷을 중계해서 특정 방향을 전송하는 것을 routing
    * 이 routing을 통해서 inter-networking이 가능해진다.

    * 접속한 컴퓨터 식별 위한 주소 부여 기능!

* 주요 프로토콜

    * IP : 직접 연결되어 있는 컴퓨터끼리 구성한 개별 네트워크끼리 필요에 따라 패킷의 라우팅을 한다.
    * IP 주소를 사용
    * IP 주소는 중복이 허용되지 않으므로 인터 네트워킹에 참가할 네트워크 전체에서 하나의 규칙을 따르며 중복되지 않도록 효율적으로 할당될 필요가 있지.
    * 이와 관련된 프로토콜이 IP

---
### 4. TCP의 통신 절차

* TCP가 하는 일

    * 부여된 데이터의 순서 보증(시퀀스 번호)
    * 수신 데이터의 오류 존재 여부에 대한 확인(오류 검증)
    * 상대가 확실히 수신했는지 확인(긍정 확인 응답)
    * 수신받지 못한 데이터 재전송 요청(슬라이딩 윈도우)
    * 상대의 페이스에 맞춘 데이터 전송(흐름 제어)
    * 네트워크의 혼잡 상황에 따른 송신 속도 조정(혼잡 제어)

* TCP 통신 절차

    * 3-way handshake 방법 사용
    * 통신 시작 : SYN, ACK+SYN, ACK
    * 통신 종료 : FIN, ACK+FIN, ACK

---
### 5. 레이어별 처리와 패킷의 관계

* 전송하는 측의 처리화 헤더 추가

    * 프로토콜 스택을 구성하는 각 레이어는 아래위로 인접하는 층과 연계해서 통신 처리

    * 헤더 란? 데이터를 전송하는 측에서는 상위측에서 받은 데이터를 기반으로 어떤 형태로든 통신을 처리하며 그 통신 처리에 필요한 각종 정보를 데이터 본체 앞에 추가! 이게 바로 헤더 

    * 이 전체를 하위층에 넘기고 상위층은 종료

    * 이게 아래로 내려갈 수 록 패킷의 전체 크기는 커지겠지

* 수신받는 측의 처리와 헤더 제거

    * 데이터를 받는 측(위쪽이겠지)에서는 하위층에서 받은 패킷에 포함된 헤더 부분의 정보를 사용해서 필요한 정보를 처리

    * 처리가 다 끝나면 헤더 부분 제거, 데이터 부분만 상위로 넘겨 

    * 위로 올라갈수록 헤더가 제거되므로 패킷의 전체 크기는 점점 줄어들게 됨

    * 최종적으로 전송 측에서 최초에 내보낸 데이터만 남게된다!!

