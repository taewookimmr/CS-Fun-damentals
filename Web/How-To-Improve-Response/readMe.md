## 브라우저의 반응 속도를 향상시키기 위한 방법

## referene 
https://12bme.tistory.com/127

위의 블로그 글을 보며 기초를 익히도록 하자.
이 글의 컨셉은 직접 타이핑하면서 익숙해지는 것

### 1. 웹사이트 성능과 최적화

1. 웹페이지의 반응 시간(응답 속도와 관련)은 웹 서비스 경쟁력 중 하나
2. 웹서비스는 모두 브라우저에서 표현된다.(용어 이해)
3. 브라우저가 웹페이지를 처리하는 방식
```
1. 서비스 이동 단계
2. Redirect 단계
3. Application cache 확인 단계
4. Network 통신 단계
```

4. 가장 효과적인 방법 : 네트워크 속도 개선
5. 대안 : 네트워크 사용량을 줄이는 방향으로 가보자

### 2. 브라우저 동작 방식을 기반으로 한 최적화

우선 브라우저가 어떻게 동작하는지 이해해야 한다.

#### 1> 서비스 이동 단계
  
  * 사용자가 웹서비스를 이용하다가 다른 주소로 이동할 때 브라우저가 제일 먼저 실행하는 단계
  * 브라우저 내부에서 처리하기 때문에, 브라우저 성능과 직결
  * 웹서비스를 이용하면 페이자가 표시될 때 이벤트가 할당되는데, 이때 메모리가 일정 공간 사용된다.
    해당 페이지를 떠날 때, 이 메모리를 해제해야 한다. 이 단계는 이 해제 작업이 수행되는 단계이다. 
  * GC가 제대로 동작하지 않으면 -> 응답 없음, or 실행 속도 느려짐
  * 이를 해결하는 방법 중 하나 : 성능이 개선된 최신 브라우저로 업데이트 하는 것!
  * DOM의 생성과 삭제가 빈번한 페이지, 한 페이지에 다수의 AJAX 통신이 필요한 페이지, 이벤트 바인딩 수가 많은 페이지, 사용자 체류 시간이 긴 페이지를 개발할 때 -> 필요 없는 변수나 오브젝트 삭제, 이벤트 해제 등을 활용하여 메모리 관리 필요!
  * JS의 변수, 객체, DOM 객체, AJAX 통신 사용시 성능을 높이려면 -> 코드 스타일, 렌더링, UI 스레드, 타이머 사용, DOM 스크리빙, AJAX 다이나믹 로딩 방법이 있다. 
  * 서비스 이동 단계의 작업은 브라우저 내부에서 자동으로 실행된다!
  * 별도로 처리하고 싶다면 ? beforeunload 이벤트 활용 
  ```
  솔루션 : 성능이 개선된 최신 브라우저로 업데이트 하는 것!
  ```

#### 2> 리다이렉트 단계

  * 사용자가 요청한 URL에서 다른 URL로 다시 보내는 단계
  * 리다이렉트 발생하면 상태 코드로 301 or 302 반환 ->  HTTP 요청을 완수하기 위해서는 추가로 무언가를 해야한다는 것.
  * 조건부 GET 요청은 브라우저에 캐싱된 리소스를 사용하기 전에 해당 리소스를 사용해도 되는지 서버에 물어보는 것.
  * 이때 헤더의 If-Modified-Since 정보를 이용해 서버에 요청을 보냅니다. 리소스가 수정되지 않았다면 '304 Not Modified" 코드를 받아 캐시 리소스를 사용 
  * 캐시의 만료 날짜를 설정했다면 서버의 확인을 거치지 않고! 바로 캐싱된 리소스를 사용할 수 있다. 
  * 그런데 메타태그로 리다이렉트하면 조건부 GET 요청이 발생 -> 불필요한 서버 통신임 -> 응답 속도 느려짐
  * 여기서 메타태그는 ? -> example 갑니다
  ```html
  <meta http-equiv="refresh" content="1; url=http://www.naver.com/">
  ```
  * 리다이렉트가 필요하다면 메타태그가 아니라 서버사이드 설정으로 처리하는 편이 더 좋다!
  * 웹페이지 주소뿐만 아니라 이미지, 스타일시트, 자바스크립트 같은 것들도 리다이렉트될 수 있다.
  * Fiddler를 이용하여 301이나 302 상태가 발생하는 요소들을 찾아 의도치 않게 리다이렉트가 발생하고 있는 부분을 바로 잡아야 한다. 
  
  ```
  솔루션
  1. 서버사이드 랜더링
  2. Fiddler 이용
  
  forward, redirect 등 기본을 다시 공부합시다.
  ```
#### 3> 애플리케이션 캐시 확인 단계

  * 리다이렉트 작업을 마치고 HTTP 요청을 처리하기 위한 준비를 마쳤다면 브라우저는 서버로 요청을 보낸다.
  * 서버에서 응답이 오면 개별 요소가 사용자 PC에 있는지 Cache 데이터 확인
  * 캐시 데이터의 종류로는 쿠키, 이미지, 스크립트, 스타일시트
  * 성능 향상을 위해 가장 효과적인 방법은 브라우저와 서버 사이의 통신을 최대한 줄이는 것 
  ```
  솔루션 : Cache 데이터 활용
  ```
 
#### 4> 네트워크 통신 단계
  
  * 프로세싱 모델의 DNS, TCP< Request, Response에 해당
  * Expires 설정이나 Cache Control 속성을 이용해 사용자가 웹페이지에 다시 왔을 때, 캐시를 사용하거나 스타일 시트나 자바스크립트와 같이 파일을 합쳐서 서비스해도 문제가 없는 리소스를 합쳐 하나의 링크로 제공해 요청 횟수를 줄이면 네트워크 비용을 줄일 수 있다.
  * to be continued
  
#### 5> 브라우저 처리 단계

  * to be continued
 
